# Quiz Game — Пользовательские сценарии

## 1. Сценарий ведущего

### 1.1. Регистрация / Авторизация
- Ведущий регистрируется или входит в личный кабинет через веб-интерфейс (логин + пароль).

### 1.2. Настройки — Бот
1. Ведущий заходит в настройки личного кабинета.
2. Вводит **токен Telegram-бота** (полученный через @BotFather).
3. Вводит **ссылку на бота** (например, `https://t.me/my_quiz_bot`).
4. Сохраняет. Этот бот будет использоваться для проведения квизов.

### 1.3. Личный кабинет — Создание квиза
1. Ведущий заходит в личный кабинет.
2. Нажимает «Создать квиз», вводит название.
3. Добавляет вопросы. Каждый вопрос содержит:
   - Текст вопроса.
   - От **2 до 4** вариантов ответа.
   - Ровно **один** вариант помечен как правильный.
4. Сохраняет квиз. Квиз появляется в списке квизов ведущего.

### 1.4. Запуск квиза (создание сессии)
1. Ведущий выбирает квиз из своего списка и нажимает «Запустить квиз».
2. Создаётся **сессия квиза**.
3. На экране отображается:
   - **QR-код** для подключения к боту ведущего с автоматической привязкой к сессии.
   - **Числовой код** сессии для ручного ввода в боте.
4. Ведущий ждёт, пока участники подключатся.

### 1.5. Проведение квиза (экран ведущего)
Цикл по каждому вопросу:
1. На экране отображается **текст вопроса** и **варианты ответа**.
2. Участники отвечают через Telegram-бота.
3. Ведущий нажимает **«Показать правильный ответ»**:
   - Ответы от участников больше **не принимаются**.
   - На экране подсвечивается **правильный ответ**.
4. Ведущий нажимает **«Следующий вопрос»** → переход к следующему вопросу.
5. Повторяется до последнего вопроса.

### 1.6. Завершение квиза
1. После последнего вопроса ведущий нажимает **«Показать результаты»**.
2. На экране отображается **таблица лидеров** — участники, отсортированные по очкам.

### 1.7. История сессий
- В личном кабинете ведущий может просматривать **результаты прошлых сессий** (таблицу лидеров, дату проведения).

---

## 2. Сценарий участника (Telegram-бот)

### 2.1. Подключение к сессии
1. Участник открывает Telegram-бота ведущего (через QR-код или вручную).
2. Вводит **код сессии**.
3. Вводит **никнейм** (будет отображаться в таблице лидеров).
4. Попадает в сессию, видит сообщение «Ожидание начала квиза…».

### 2.2. Игровой процесс
Цикл по каждому вопросу:
1. Бот **редактирует** сообщение, показывая **текст вопроса** и **кнопки с вариантами ответа** (inline-кнопки).
2. Участник нажимает один из вариантов — выбранный ответ **подсвечивается** в кнопках.
3. Участник может **изменить ответ**, нажав другую кнопку, пока ведущий не раскрыл правильный ответ.
4. Когда ведущий раскрывает правильный ответ, бот **редактирует** сообщение, показывая правильно ли участник ответил и сколько очков получил.

### 2.3. Результаты
- После завершения квиза бот **редактирует** сообщение, показывая итоговую таблицу лидеров и место участника.
- Все сообщения во время квиза обновляются через **редактирование одного сообщения**, чтобы не засорять чат.

---

## 3. Система начисления очков

| Компонент              | Очки         | Описание                                                     |
|------------------------|--------------|--------------------------------------------------------------|
| Правильный ответ       | **100**      | Фиксированно за каждый правильный ответ                      |
| Бонус за скорость      | **1 — 50**   | Зависит от порядка ответа: 1-й ответивший = 50, далее убывает |

### Формула бонуса за скорость
- 1-й правильно ответивший: **+50** бонусных очков
- Последующие: бонус линейно убывает от 50 до 1 в зависимости от общего числа участников и порядкового номера ответа.

**Итого за вопрос** = `100 + bonus` (если ответ правильный), `0` (если неправильный).
