# Quiz Game — Обзор проекта

## Суть
Приложение для проведения квизов с вариантами ответа. Ведущий управляет квизом через веб-интерфейс (личный кабинет + экран сессии), участники играют через Telegram-бота.

## Стек технологий

| Компонент       | Технологии                                  |
|-----------------|---------------------------------------------|
| Backend API     | Go (Gin + GORM)                             |
| Telegram Bot    | Go (встроен в бэкенд, webhook-based)        |
| Frontend        | React + Redux Toolkit + React Router + Vite |
| База данных     | PostgreSQL 16                               |
| Контейнеризация | Docker Compose                              |
| CI/CD           | GitHub Actions (SSH deploy на VPS)          |
| SSL             | Let's Encrypt (Certbot + Nginx)             |

## Архитектура

```
┌──────────────┐     ┌───────────────────────┐     ┌──────────────┐
│  React SPA   │────▶│      Go Backend       │◀────│   Telegram   │
│  (Frontend)  │     │  API + Bot Manager    │     │   Webhooks   │
└──────────────┘     └──────────┬────────────┘     └──────────────┘
                                │
                         ┌──────▼───────┐
                         │  PostgreSQL   │
                         └──────────────┘
```

- **React SPA** — веб-интерфейс для ведущего (личный кабинет + экран сессии). Собирается Vite, раздаётся через Nginx.
- **Go Backend** — единый бэкенд: REST API, WebSocket, Telegram Bot Manager. Бот-менеджер динамически регистрирует вебхуки для ботов каждого ведущего.
- **PostgreSQL** — единая база данных.

## Ключевые принципы
1. Telegram-бот **встроен в бэкенд** — не отдельный сервис. Работает через вебхуки.
2. Каждый ведущий настраивает **свой бот** (токен от @BotFather). Бот-менеджер автоматически регистрирует/удаляет вебхуки при изменении токенов.
3. Авторизация ведущего — JWT (логин/пароль).
4. Авторизация участника — Telegram ID + ник (сохраняется в БД).
5. Квизы организованы в **категории**. Порядок категорий и вопросов меняется drag-n-drop.
6. Поддержка **импорта/экспорта** квизов в JSON и CSV.

## Система очков

| Компонент         | Очки                       | Описание                                           |
|-------------------|----------------------------|-----------------------------------------------------|
| Правильный ответ  | **+100**                   | Фиксировано за каждый правильный ответ              |
| Бонус за скорость | **10 — участники × 10**    | Получают **все** ответившие, независимо от правильности |

### Формула бонуса за скорость
- Максимальный бонус = количество участников × 10
- 1-й ответивший: максимальный бонус
- Каждый следующий: −10
- Минимальный бонус: 10

**Примеры (10 участников):**
- 1-й ответил правильно: 100 + 100 = **200** очков
- 2-й ответил неправильно: 0 + 90 = **90** очков
- Последний ответил правильно: 100 + 10 = **110** очков
- Не ответил: **0** очков
