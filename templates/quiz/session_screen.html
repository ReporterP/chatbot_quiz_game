<!doctype html>
<html lang="ru">
  <head>
    <meta charset="utf-8">
    <title>Quiz {{ session.join_code }}</title>
    <meta http-equiv="refresh" content="5">
  </head>
  <body>
    <h1>{{ session.quiz.title }}</h1>
    <p>Код подключения: <strong>{{ session.join_code }}</strong></p>

    {% if session.status == 'completed' %}
      <h2>Квиз завершен</h2>
    {% endif %}

    {% if session.current_question %}
      <h2>Вопрос</h2>
      <p>{{ session.current_question.text }}</p>
      {% if session.current_question_revealed %}
        <h3>Правильный ответ</h3>
        {% for option in session.current_question.options.all %}
          {% if option.is_correct %}
            <p><strong>{{ option.text }}</strong></p>
          {% endif %}
        {% endfor %}
      {% else %}
        <p>Ожидаем ответы...</p>
      {% endif %}
    {% endif %}

    <h2>Таблица лидеров</h2>
    <table border="1" cellpadding="6">
      <thead>
        <tr>
          <th>Место</th>
          <th>Участник</th>
          <th>Баллы</th>
        </tr>
      </thead>
      <tbody>
        {% for participant in participants %}
          <tr>
            <td>{{ forloop.counter }}</td>
            <td>{{ participant.first_name }} {{ participant.last_name }} @{{ participant.username }}</td>
            <td>{{ participant.score }}</td>
          </tr>
        {% empty %}
          <tr>
            <td colspan="3">Нет участников</td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  </body>
</html>

